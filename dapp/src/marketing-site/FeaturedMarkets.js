// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var React = require("react");
var Loader = require("../components/UI/Base/Loader.js");
var Market = require("../components/Markets/Market.js");
var Js_dict = require("rescript/lib/js/js_dict.js");
var Queries = require("../data/Queries.js");
var Belt_Int = require("rescript/lib/js/belt_Int.js");
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var MarketCard = require("../components/Markets/MarketCard.js");
var Belt_Option = require("rescript/lib/js/belt_Option.js");
var Router = require("next/router");

function FeaturedMarkets(Props) {
  var router = Router.useRouter();
  var marketIndexOption = Js_dict.get(router.query, "marketIndex");
  var marketDetailsQuery = Curry.app(Queries.MarketDetails.use, [
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined
      ]);
  var match = marketDetailsQuery.data;
  var tmp;
  if (marketDetailsQuery.loading) {
    tmp = React.createElement("div", {
          className: "m-auto"
        }, React.createElement(Loader.Mini.make, {}));
  } else if (marketDetailsQuery.error !== undefined) {
    tmp = "Error loading data";
  } else if (match !== undefined) {
    var syntheticMarkets = match.syntheticMarkets;
    if (marketIndexOption !== undefined) {
      if (Belt_Option.mapWithDefault(Belt_Int.fromString(marketIndexOption), 1000, (function (x) {
                return x;
              })) <= syntheticMarkets.length) {
        var selectedMarketData = Belt_Array.get(syntheticMarkets, Belt_Option.mapWithDefault(Belt_Int.fromString(marketIndexOption), 1000, (function (x) {
                    return x;
                  })) - 1 | 0);
        tmp = selectedMarketData !== undefined ? React.createElement(Market.make, {
                marketData: selectedMarketData
              }) : null;
      } else {
        tmp = null;
      }
    } else {
      tmp = React.createElement(React.Fragment, undefined, Belt_Array.mapWithIndex(syntheticMarkets, (function (index, marketData) {
                  return React.createElement("div", {
                              className: "max-w-lg w-full md:min-w-340 mx-2 " + (
                                index === 1 ? "md:transform md:-translate-y-48 md:translate-x-16 " : ""
                              ) + " " + (
                                index === 2 ? "md:transform md:translate-y-32 md:-translate-x-60" : ""
                              )
                            }, React.createElement(MarketCard.Mini.make, {
                                  marketData: marketData,
                                  key: marketData.name
                                }));
                })));
    }
  } else {
    tmp = "";
  }
  return React.createElement("div", {
              className: "w-full mx-auto px-2 md:px-0 flex flex-col md:flex-row"
            }, tmp);
}

var make = FeaturedMarkets;

var $$default = FeaturedMarkets;

exports.make = make;
exports.$$default = $$default;
exports.default = $$default;
exports.__esModule = true;
/* react Not a pure module */
