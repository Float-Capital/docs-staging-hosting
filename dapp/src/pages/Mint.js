// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var React = require("react");
var Loader = require("../components/UI/Base/Loader.js");
var Js_dict = require("rescript/lib/js/js_dict.js");
var Queries = require("../data/Queries.js");
var Belt_Int = require("rescript/lib/js/belt_Int.js");
var MintForm = require("../components/Trade/MintForm.js");
var Link = require("next/link").default;
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var Belt_Option = require("rescript/lib/js/belt_Option.js");
var Router = require("next/router");

function Mint$DetailsWrapper(Props) {
  var market = Props.market;
  var marketIndex = Props.marketIndex;
  var actionOption = Props.actionOption;
  var children = Props.children;
  var view = Props.view;
  return React.createElement("div", {
              className: "max-w-xl mx-auto"
            }, view === /* LandingPage */0 ? null : React.createElement(Link, {
                    href: "/app/markets",
                    children: React.createElement("div", {
                          className: "uppercase text-sm text-gray-600 hover:text-gray-500 cursor-pointer mb-2 hover:z-50"
                        }, "â—€", React.createElement("span", {
                              className: "text-xxs"
                            }, " Back to markets"))
                  }), React.createElement("div", {
                  className: "p-5 rounded-lg flex flex-col bg-white bg-opacity-" + (
                    view === /* LandingPage */0 ? "100 border" : "70"
                  ) + " shadow-lg"
                }, React.createElement("div", {
                      className: "flex justify-between items-center mb-2"
                    }, React.createElement("div", {
                          className: "text-xl"
                        }, market.name + " (" + market.symbol + ")"), React.createElement(Link, {
                          href: "/app/markets?marketIndex=" + marketIndex + "&actionOption=" + actionOption,
                          children: React.createElement("div", {
                                className: "text-xxs hover:underline cursor-pointer"
                              }, "view details")
                        })), children));
}

var DetailsWrapper = {
  make: Mint$DetailsWrapper
};

function Mint(Props) {
  var withHeaderOpt = Props.withHeader;
  var withHeader = withHeaderOpt !== undefined ? withHeaderOpt : true;
  var router = Router.useRouter();
  var markets = Curry.app(Queries.MarketDetails.use, [
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined
      ]);
  var marketIndex = Belt_Option.getWithDefault(Js_dict.get(router.query, "marketIndex"), "1");
  var actionOption = Belt_Option.getWithDefault(Js_dict.get(router.query, "actionOption"), "short");
  var match = markets.data;
  var tmp;
  if (markets.loading) {
    tmp = React.createElement(Loader.make, {});
  } else if (markets.error !== undefined) {
    tmp = "Error loading data";
  } else if (match !== undefined) {
    var optFirstMarket = Belt_Array.get(match.syntheticMarkets, Belt_Option.getWithDefault(Belt_Int.fromString(marketIndex), 1) - 1 | 0);
    tmp = optFirstMarket !== undefined ? (
        withHeader ? React.createElement(Mint$DetailsWrapper, {
                market: optFirstMarket,
                marketIndex: marketIndex,
                actionOption: actionOption,
                children: React.createElement(MintForm.make, {
                      market: optFirstMarket,
                      isLong: actionOption !== "short"
                    }),
                view: /* MintView */1
              }) : React.createElement(MintForm.make, {
                market: optFirstMarket,
                isLong: actionOption !== "short"
              })
      ) : React.createElement("p", undefined, "No markets exist");
  } else {
    tmp = "You might think this is impossible, but depending on the situation it might not be!";
  }
  return React.createElement("section", {
              className: "h-full px-6"
            }, tmp);
}

var make = Mint;

var $$default = Mint;

exports.DetailsWrapper = DetailsWrapper;
exports.make = make;
exports.$$default = $$default;
exports.default = $$default;
exports.__esModule = true;
/* react Not a pure module */
