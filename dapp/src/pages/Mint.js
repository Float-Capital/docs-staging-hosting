// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var React = require("react");
var Loader = require("../components/UI/Loader.js");
var Js_dict = require("rescript/lib/js/js_dict.js");
var Queries = require("../data/Queries.js");
var Belt_Int = require("rescript/lib/js/belt_Int.js");
var MintForm = require("../components/Trade/MintForm.js");
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var Belt_Option = require("rescript/lib/js/belt_Option.js");
var Router = require("next/router");

function Mint$DetailsWrapper(Props) {
  var market = Props.market;
  var children = Props.children;
  return React.createElement("div", {
              className: "p-5 rounded-lg max-w-xl mx-auto flex flex-col bg-white bg-opacity-70 shadow-lg"
            }, React.createElement("div", {
                  className: "flex justify-between mb-2 text-xl"
                }, market.name + " (" + market.symbol + ")"), children);
}

var DetailsWrapper = {
  make: Mint$DetailsWrapper
};

function Mint$Mint(Props) {
  var withHeader = Props.withHeader;
  var router = Router.useRouter();
  var markets = Curry.app(Queries.MarketDetails.use, [
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined
      ]);
  var marketIndex = Belt_Option.getWithDefault(Js_dict.get(router.query, "marketIndex"), "1");
  var actionOption = Belt_Option.getWithDefault(Js_dict.get(router.query, "actionOption"), "short");
  var match = markets.data;
  var tmp;
  if (markets.loading) {
    tmp = React.createElement(Loader.make, {});
  } else if (markets.error !== undefined) {
    tmp = "Error loading data";
  } else if (match !== undefined) {
    var optFirstMarket = Belt_Array.get(match.syntheticMarkets, Belt_Option.getWithDefault(Belt_Int.fromString(marketIndex), 1) - 1 | 0);
    tmp = optFirstMarket !== undefined ? (
        withHeader ? React.createElement(Mint$DetailsWrapper, {
                market: optFirstMarket,
                children: React.createElement(MintForm.make, {
                      market: optFirstMarket,
                      isLong: actionOption !== "short"
                    })
              }) : React.createElement(MintForm.make, {
                market: optFirstMarket,
                isLong: actionOption !== "short"
              })
      ) : React.createElement("p", undefined, "No markets exist");
  } else {
    tmp = "You might think this is impossible, but depending on the situation it might not be!";
  }
  return React.createElement("section", {
              className: "h-full px-6"
            }, tmp);
}

var Mint = {
  make: Mint$Mint
};

function $$default(param) {
  return React.createElement(Mint$Mint, {
              withHeader: true
            });
}

exports.DetailsWrapper = DetailsWrapper;
exports.Mint = Mint;
exports.$$default = $$default;
exports.default = $$default;
exports.__esModule = true;
/* react Not a pure module */
