// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var React = require("react");
var Loader = require("../components/UI/Base/Loader.js");
var Markets = require("./Markets.js");
var Belt_Int = require("rescript/lib/js/belt_Int.js");
var Belt_Option = require("rescript/lib/js/belt_Option.js");
var StartTrading = require("../components/UI/StartTrading.js");

function Home$Home(Props) {
  var match = React.useState(function () {
        return false;
      });
  var setHasVisitedEnoughTimes = match[1];
  var match$1 = React.useState(function () {
        return false;
      });
  var setIsPartOfActiveSession = match$1[1];
  var match$2 = React.useState(function () {
        return false;
      });
  var match$3 = React.useState(function () {
        return /* Rendering */0;
      });
  var setState = match$3[1];
  React.useEffect((function () {
          var key = "numberOfVisits";
          var localStorage$1 = localStorage;
          var optNumberOfVisits = localStorage$1.getItem(key);
          var numberOfVisits = optNumberOfVisits !== null ? Belt_Option.getWithDefault(Belt_Int.fromString(optNumberOfVisits), 0) + 1 | 0 : 0;
          Curry._1(setHasVisitedEnoughTimes, (function (param) {
                  return numberOfVisits >= 3;
                }));
          localStorage$1.setItem(key, String(numberOfVisits));
          var key$1 = "isActiveSession";
          var sessionStorage$1 = sessionStorage;
          var optIsActiveSession = sessionStorage$1.getItem(key$1);
          if (optIsActiveSession !== null) {
            Curry._1(setIsPartOfActiveSession, (function (param) {
                    return optIsActiveSession === "true";
                  }));
          } else {
            sessionStorage$1.setItem(key$1, "true");
          }
          Curry._1(setState, (function (param) {
                  return /* Rendered */1;
                }));
          
        }), []);
  if (match$3[0]) {
    if (match[0] || match$1[0] || match$2[0]) {
      return React.createElement(Markets.make, {});
    } else {
      return React.createElement(StartTrading.make, {
                  clickedTrading: match$2[1]
                });
    }
  } else {
    return React.createElement(Loader.make, {});
  }
}

var Home = {
  make: Home$Home
};

function $$default(param) {
  return React.createElement(Home$Home, {});
}

exports.Home = Home;
exports.$$default = $$default;
exports.default = $$default;
exports.__esModule = true;
/* react Not a pure module */
