// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var React = require("react");
var Loader = require("../UI/Base/Loader.js");
var Market = require("./Market.js");
var Js_dict = require("rescript/lib/js/js_dict.js");
var Queries = require("../../data/Queries.js");
var Belt_Int = require("rescript/lib/js/belt_Int.js");
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var MarketCard = require("./MarketCard.js");
var Belt_Option = require("rescript/lib/js/belt_Option.js");
var Router = require("next/router");

function MarketsList$MarketsList(Props) {
  var router = Router.useRouter();
  var marketIndexOption = Js_dict.get(router.query, "marketIndex");
  var marketDetailsQuery = Curry.app(Queries.MarketDetails.use, [
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined
      ]);
  var match = marketDetailsQuery.data;
  var tmp;
  if (marketDetailsQuery.loading) {
    tmp = React.createElement("div", {
          className: "m-auto"
        }, React.createElement(Loader.Mini.make, {}));
  } else if (marketDetailsQuery.error !== undefined) {
    tmp = "Error loading data";
  } else if (match !== undefined) {
    var syntheticMarkets = match.syntheticMarkets;
    if (marketIndexOption !== undefined) {
      if (Belt_Option.mapWithDefault(Belt_Int.fromString(marketIndexOption), 1000, (function (x) {
                return x;
              })) <= syntheticMarkets.length) {
        var selectedMarketData = Belt_Array.get(syntheticMarkets, Belt_Option.mapWithDefault(Belt_Int.fromString(marketIndexOption), 1000, (function (x) {
                    return x;
                  })) - 1 | 0);
        tmp = selectedMarketData !== undefined ? React.createElement(Market.make, {
                marketData: selectedMarketData
              }) : null;
      } else {
        tmp = null;
      }
    } else {
      tmp = React.createElement(React.Fragment, undefined, Belt_Array.map(syntheticMarkets, (function (marketData) {
                  return React.createElement("div", {
                              className: "mb-4"
                            }, React.createElement(MarketCard.make, {
                                  marketData: marketData,
                                  key: marketData.name
                                }));
                })));
    }
  } else {
    tmp = "";
  }
  return React.createElement("div", {
              className: "w-full max-w-5xl mx-auto px-2 md:px-0"
            }, tmp);
}

var MarketsList = {
  make: MarketsList$MarketsList
};

function $$default(param) {
  return React.createElement(MarketsList$MarketsList, {});
}

exports.MarketsList = MarketsList;
exports.$$default = $$default;
exports.default = $$default;
exports.__esModule = true;
/* react Not a pure module */
