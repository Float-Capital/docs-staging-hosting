// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as Market from "./Market.js";
import * as Js_dict from "rescript/lib/es6/js_dict.js";
import * as Queries from "../../data/Queries.js";
import * as Belt_Int from "rescript/lib/es6/belt_Int.js";
import * as Belt_Array from "rescript/lib/es6/belt_Array.js";
import * as MarketCard from "./MarketCard.js";
import * as MiniLoader from "../UI/MiniLoader.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";
import * as Router from "next/router";

function MarketsList$MarketsList(Props) {
  var router = Router.useRouter();
  var marketIndexOption = Js_dict.get(router.query, "marketIndex");
  var marketDetailsQuery = Curry.app(Queries.MarketDetails.use, [
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined
      ]);
  var match = marketDetailsQuery.data;
  var tmp;
  if (marketDetailsQuery.loading) {
    tmp = React.createElement("div", {
          className: "m-auto"
        }, React.createElement(MiniLoader.make, {}));
  } else if (marketDetailsQuery.error !== undefined) {
    tmp = "Error loading data";
  } else if (match !== undefined) {
    var syntheticMarkets = match.syntheticMarkets;
    if (marketIndexOption !== undefined) {
      if (Belt_Option.mapWithDefault(Belt_Int.fromString(marketIndexOption), 1000, (function (x) {
                return x;
              })) <= syntheticMarkets.length) {
        var selectedMarketData = Belt_Array.get(syntheticMarkets, Belt_Option.mapWithDefault(Belt_Int.fromString(marketIndexOption), 1000, (function (x) {
                    return x;
                  })) - 1 | 0);
        tmp = selectedMarketData !== undefined ? React.createElement(Market.make, {
                marketData: selectedMarketData
              }) : null;
      } else {
        tmp = null;
      }
    } else {
      tmp = React.createElement(React.Fragment, undefined, Belt_Array.map(syntheticMarkets, (function (marketData) {
                  return React.createElement(MarketCard.make, {
                              marketData: marketData,
                              key: marketData.name
                            });
                })));
    }
  } else {
    tmp = "";
  }
  return React.createElement("div", {
              className: "w-full max-w-5xl mx-auto px-2 md:px-0"
            }, tmp);
}

var MarketsList = {
  make: MarketsList$MarketsList
};

function $$default(param) {
  return React.createElement(MarketsList$MarketsList, {});
}

export {
  MarketsList ,
  $$default ,
  $$default as default,
  
}
/* react Not a pure module */
