// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Curry = require("rescript/lib/js/curry.js");
var React = require("react");
var Config = require("../../Config.js");
var Js_dict = require("rescript/lib/js/js_dict.js");
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var Router = require("next/router");
var RootProvider = require("../../libraries/RootProvider.js");
var Web3Connectors = require("../../bindings/web3-react/Web3Connectors.js");
var TorusConnector = require("@web3-react/torus-connector");
var WalletconnectConnector = require("@web3-react/walletconnect-connector");

var connectors = [
  {
    name: "MetaMask",
    connector: Web3Connectors.injected,
    img: "/img/wallet-icons/metamask.svg",
    connectionPhrase: "Connect to your MetaMask Wallet"
  },
  {
    name: "WalletConnect",
    connector: new WalletconnectConnector.WalletConnectConnector({
          rpc: Js_dict.fromArray([[
                  String(Config.networkId),
                  Config.rpcEndopint
                ]]),
          bridge: "https://bridge.walletconnect.org",
          qrcode: true,
          pollingInterval: Config.web3PollingInterval
        }),
    img: "/img/wallet-icons/walletConnect.svg",
    connectionPhrase: "Connect via WalletConnect"
  },
  {
    name: "Torus",
    connector: new TorusConnector.TorusConnector({
          chainId: 1
        }),
    img: "/img/wallet-icons/torus.svg",
    connectionPhrase: "Connect via Torus"
  }
];

function Login(Props) {
  var match = RootProvider.useActivateConnector(undefined);
  var activateConnector = match[1];
  var router = Router.useRouter();
  var nextPath = Js_dict.get(router.query, "nextPath");
  var optCurrentUser = RootProvider.useCurrentUser(undefined);
  React.useEffect((function () {
          if (nextPath !== undefined && optCurrentUser !== undefined) {
            router.push(nextPath);
          }
          
        }), [
        nextPath,
        optCurrentUser
      ]);
  return React.createElement("div", undefined, React.createElement("p", {
                  className: "mx-2 md:mx-0"
                }, "Connect with one of the wallets below. "), React.createElement("p", {
                  className: "text-xs"
                }, "Please make sure to connect to " + Config.networkName + "."), React.createElement("div", {
                  className: "grid grid-cols-1 md:grid-cols-3 gap-4 items-center my-5"
                }, Belt_Array.mapWithIndex(connectors, (function (index, connector) {
                        return React.createElement("div", {
                                    key: String(index),
                                    className: "mx-2 md:mx-0 p-5 flex flex-col items-center justify-center bg-white bg-opacity-75 hover:bg-gray-200 active:bg-gray-300 rounded ",
                                    onClick: (function (e) {
                                        e.stopPropagation();
                                        return Curry._1(activateConnector, connector.connector);
                                      })
                                  }, React.createElement("div", {
                                        className: "w-10 h-10"
                                      }, React.createElement("img", {
                                            className: "w-full h-full",
                                            alt: connector.name,
                                            src: connector.img
                                          })), React.createElement("div", {
                                        className: "text-xl font-bold my-1"
                                      }, connector.name), React.createElement("div", {
                                        className: "text-base my-1 text-gray-400\t"
                                      }, connector.connectionPhrase));
                      }))));
}

var make = Login;

var $$default = Login;

exports.connectors = connectors;
exports.make = make;
exports.$$default = $$default;
exports.default = $$default;
exports.__esModule = true;
/* connectors Not a pure module */
