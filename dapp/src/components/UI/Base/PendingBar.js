// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var React = require("react");
var Loader = require("./Loader.js");
var Tooltip = require("./Tooltip.js");
var CONSTANTS = require("../../../CONSTANTS.js");
var DataHooks = require("../../../data/DataHooks.js");
var Caml_option = require("rescript/lib/js/caml_option.js");
var FormatRelative = require("date-fns/formatRelative").default;

function PendingBar(Props) {
  var marketIndexOpt = Props.marketIndex;
  var marketIndex = marketIndexOpt !== undefined ? Caml_option.valFromOption(marketIndexOpt) : CONSTANTS.oneBN;
  var lastOracleTimestamp = DataHooks.useOracleLastUpdate(marketIndex.toString());
  var tmp;
  tmp = typeof lastOracleTimestamp === "number" ? React.createElement(Loader.Tiny.make, {}) : (
      lastOracleTimestamp.TAG === /* GraphError */0 ? React.createElement("p", {
              className: "text-xxxxs"
            }, lastOracleTimestamp._0) : React.createElement("p", {
              className: "text-sm ml-2"
            }, FormatRelative(new Date(lastOracleTimestamp._0.toNumber()), new Date(Date.now())))
    );
  return React.createElement("div", {
              className: "relative pt-1"
            }, React.createElement("div", {
                  className: "text-xxs text-center mx-4"
                }, "Your transaction will be processed with the next price update ", React.createElement(Tooltip.make, {
                      tip: "To ensure fairness and security your position will be opened on the next oracle price update"
                    })), React.createElement("div", {
                  className: "flex flex-row justify-between text-xxxs"
                }, React.createElement("div", {
                      className: "flex flex-row justify-start items-center"
                    }, React.createElement("p", {
                          className: "text-gray"
                        }, "Previous", React.createElement("br", undefined), "update"), React.createElement("p", {
                          className: "text-sm ml-2"
                        }, "11:14:32"), tmp), React.createElement("div", {
                      className: "flex flex-row justify-end items-center"
                    }, React.createElement("p", {
                          className: "text-sm mr-2"
                        }, "3min 12seconds"), React.createElement("p", {
                          className: "text-gray"
                        }, "Estimated", React.createElement("br", undefined), "next update"))), React.createElement("div", {
                  className: "w-full mx-auto my-1"
                }, React.createElement("div", {
                      className: "pending-bar-container"
                    }, React.createElement("span", {
                          className: "pending-bar"
                        }))));
}

var make = PendingBar;

exports.make = make;
/* react Not a pure module */
