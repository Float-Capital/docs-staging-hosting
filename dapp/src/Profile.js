// Generated by ReScript, PLEASE EDIT WITH CARE
'use strict';

var Card = require("./components/UI/Base/Card.js");
var Curry = require("rescript/lib/js/curry.js");
var Login = require("./components/Login/Login.js");
var React = require("react");
var Loader = require("./components/UI/Base/Loader.js");
var Ethers = require("ethers");
var Js_dict = require("rescript/lib/js/js_dict.js");
var Queries = require("./data/Queries.js");
var Metamask = require("./components/UI/Base/Metamask.js");
var Belt_Array = require("rescript/lib/js/belt_Array.js");
var DaiBalance = require("./components/ExampleViewFunctions/DaiBalance.js");
var Router = require("next/router");
var StakeDetails = require("./StakeDetails.js");
var TokenBalance = require("./components/ExampleViewFunctions/TokenBalance.js");
var AccessControl = require("./components/AccessControl.js");

function Profile$Profile(Props) {
  var router = Router.useRouter();
  var userAddress = Js_dict.get(router.query, "address");
  var tokens = Curry.app(Queries.SyntheticTokens.use, [
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined,
        undefined
      ]);
  var tmp;
  if (userAddress !== undefined) {
    var match = tokens.data;
    tmp = React.createElement("div", undefined, React.createElement("p", {
              className: "text-xs"
            }, "User: ", userAddress), React.createElement("div", {
              className: "flex w-full justify-between"
            }, React.createElement("div", {
                  className: "w-full mr-3"
                }, React.createElement(Card.make, {
                      children: React.createElement(DaiBalance.make, {})
                    }), tokens.loading ? React.createElement(Loader.Mini.make, {}) : (
                    tokens.error !== undefined ? "There was an error loading the tokens" : (
                        match !== undefined ? Belt_Array.map(match.syntheticTokens, (function (param) {
                                  var symbol = param.syntheticMarket.name;
                                  var tokenType = param.tokenType;
                                  var id = param.id;
                                  return React.createElement(Card.make, {
                                              children: React.createElement("div", {
                                                    className: "flex justify-between w-full"
                                                  }, React.createElement("div", {
                                                        className: "flex items-center "
                                                      }, React.createElement("div", {
                                                            className: "mr-2"
                                                          }, React.createElement(Metamask.AddToken.make, {
                                                                tokenAddress: id,
                                                                tokenSymbol: (
                                                                  String(tokenType).toLowerCase() === "short" ? "↘️" : "↗️"
                                                                ) + symbol.replace(/[aeiou]/ig, "")
                                                              })), symbol + " ", String(tokenType).toLowerCase() + " balance: "), React.createElement("div", {
                                                        className: "ml-2"
                                                      }, React.createElement(TokenBalance.make, {
                                                            erc20Address: Ethers.utils.getAddress(id)
                                                          })))
                                            });
                                })) : "You might think this is impossible, but depending on the situation it might not be!"
                      )
                  )), React.createElement("div", {
                  className: "w-full ml-3"
                }, React.createElement(StakeDetails.make, {}))));
  } else {
    tmp = null;
  }
  return React.createElement(AccessControl.make, {
              children: React.createElement("section", undefined, tmp),
              alternateComponent: React.createElement("h1", {
                    onClick: (function (param) {
                        router.push("/login?nextPath=/");
                        
                      })
                  }, React.createElement(Login.make, {}))
            });
}

var Profile = {
  make: Profile$Profile
};

function $$default(param) {
  return React.createElement(Profile$Profile, {});
}

exports.Profile = Profile;
exports.$$default = $$default;
exports.default = $$default;
exports.__esModule = true;
/* Card Not a pure module */
